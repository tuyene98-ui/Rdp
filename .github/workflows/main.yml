name: Linux-PC-RDP

on:
  workflow_dispatch:

jobs:
  rdp:
    runs-on: ubuntu-latest
    timeout-minutes: 360

    steps:
    - name: Update system
      run: |
        sudo apt update -y
        sudo apt install xfce4 xfce4-goodies xrdp -y
        sudo systemctl enable xrdp
        sudo systemctl start xrdp

    - name: Set RDP password
      run: |
        echo "pcuser:123456" | sudo chpasswd
        sudo adduser pcuser sudo

    - name: Expand disk to max (‚âà125GB)
      run: |
        sudo growpart /dev/sda 1
        sudo resize2fs /dev/sda1

    - name: Allow RDP port 3389
      run: |
        sudo ufw allow 3389/tcp || true

    - name: Show connection info
      run: |
        echo "================================="
        echo "     üéâ LINUX RDP READY üéâ"
        echo "================================="
        echo "IP PUBLIC:"
        curl -s ifconfig.me
        echo ""
        echo "USERNAME: pcuser"
        echo "PASSWORD: 123456"
        echo "================================="
        echo ""
        echo "‚è≥ PC s·∫Ω ch·∫°y trong 6 gi·ªù..."

    - name: Keep alive
      run: |
        while true; do
          echo "RUNNING $(date)"
          sleep 300
        done
